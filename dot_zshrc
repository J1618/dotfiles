# =================================================
#  1. OH MY ZSH (Must load first)
# =================================================
export ZSH="$HOME/.oh-my-zsh"
export PATH=$HOME/bin:$PATH

# Set a fallback theme for Zsh itself (Posh overrides this later)
ZSH_THEME="robbyrussell"

# Load Plugins (Now that you downloaded them)
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)

source $ZSH/oh-my-zsh.sh

# =================================================
#  2. USER ENVIRONMENT & SAFETY
# =================================================

# Safety Nets
alias rm='rm -I'
alias cp='cp -i'
alias mv='mv -i'

# OpenFOAM v2406
alias of2406='source /usr/lib/openfoam/openfoam2406/etc/bashrc && \
              export FOAM_RUN="$HOME/OpenFOAM/$USER-v2406/run" && \
              [ -d $FOAM_RUN ] || mkdir -p $FOAM_RUN && \
              cd $FOAM_RUN && \
              echo "✅ OpenFOAM v2406 Loaded"'

# Telemac-Mascaret
alias tm='source $HOME/telemac-mascaret/configs/pysource.gfortranHPC.sh && echo "✅ Telemac Loaded"'

# Editor
export VISUAL=nvim
export EDITOR=nvim
alias v='nvim'
alias vi='nvim'

# Miniconda
if [ -f "$HOME/miniconda3/etc/profile.d/conda.sh" ]; then
    . "$HOME/miniconda3/etc/profile.d/conda.sh"
else
    export PATH="$HOME/miniconda3/bin:$PATH"
fi

# =================================================
#  3. OH MY POSH (Must load last to enable Transient Prompt)
# =================================================

eval "$(~/bin/oh-my-posh init zsh --config ~/.config/mytheme.omp.json)"
eval "$(~/.local/bin/zoxide init zsh)"
alias cat='batcat --theme=Catppuccin-Mocha'
alias bat='batcat --theme=Catppuccin-Mocha'
